[
   {
      "category" : "functional",
      "description" : "Step 1: PAGI::Simple::View basic template rendering with variable interpolation",
      "passes" : true,
      "steps" : [
         "Step 1: Create PAGI::Simple::View instance with template_dir",
         "Step 2: Create a simple template file with <%= $var %> syntax",
         "Step 3: Call render() with template name and variables",
         "Step 4: Verify output contains interpolated variable values",
         "Step 5: Verify template compiles without errors"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 1: Template auto-escaping prevents XSS attacks",
      "passes" : true,
      "steps" : [
         "Step 1: Create view with auto_escape => 1 (default)",
         "Step 2: Render template with <%= '<script>alert(1)</script>' %>",
         "Step 3: Verify output contains &lt;script&gt; not raw <script>",
         "Step 4: Verify & < > \" ' are all properly escaped"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 1: Raw output bypass with raw() helper",
      "passes" : true,
      "steps" : [
         "Step 1: Create view with auto_escape enabled",
         "Step 2: Render template with <%= raw('<b>bold</b>') %>",
         "Step 3: Verify output contains raw <b>bold</b> tags",
         "Step 4: Verify raw() output is not double-escaped"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 1: Template caching improves performance",
      "passes" : true,
      "steps" : [
         "Step 1: Create view with cache => 1",
         "Step 2: Render same template twice",
         "Step 3: Verify template compiled only once (cache hit)",
         "Step 4: Call clear_cache()",
         "Step 5: Render again and verify recompilation"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 1: Partial templates with include() helper",
      "passes" : true,
      "steps" : [
         "Step 1: Create main template and partial template (_partial.html.ep)",
         "Step 2: Use <%= include('_partial', var => $val) %> in main template",
         "Step 3: Verify partial content is included in output",
         "Step 4: Verify variables passed to partial are available"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 1: views() configuration method on PAGI::Simple",
      "passes" : true,
      "steps" : [
         "Step 1: Create PAGI::Simple app",
         "Step 2: Call $app->views('./templates', { auto_escape => 1 })",
         "Step 3: Verify view is configured and accessible",
         "Step 4: Verify options like extension and cache are applied"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 1: render() method on PAGI::Simple::Context",
      "passes" : true,
      "steps" : [
         "Step 1: Create app with views() configured",
         "Step 2: Create route handler that calls $c->render('template', vars)",
         "Step 3: Make HTTP request to route",
         "Step 4: Verify response contains rendered template",
         "Step 5: Verify Content-Type is text/html"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 2: Layout system with extends() helper",
      "passes" : true,
      "steps" : [
         "Step 1: Create layout template in templates/layouts/default.html.ep",
         "Step 2: Layout contains <%= content %> placeholder",
         "Step 3: Create child template with <% extends 'layouts/default' %>",
         "Step 4: Render child template",
         "Step 5: Verify output wraps child content in layout"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 2: Block definitions with block() helper",
      "passes" : true,
      "steps" : [
         "Step 1: Create layout with <%= content_for('scripts') %>",
         "Step 2: Create child template that extends layout",
         "Step 3: Define block: <% content_for 'scripts' => begin %><script>...</script><% end %>",
         "Step 4: Verify script block appears in correct location in layout"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 2: Nested layouts work correctly",
      "passes" : true,
      "steps" : [
         "Step 1: Create base layout (layouts/base.html.ep)",
         "Step 2: Create admin layout that extends base",
         "Step 3: Create page that extends admin layout",
         "Step 4: Render page",
         "Step 5: Verify content flows through both layouts correctly"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 2: content_for() accumulates across includes",
      "passes" : true,
      "steps" : [
         "Step 1: Create layout with content_for('scripts') block",
         "Step 2: Create main template that includes two partials",
         "Step 3: Each partial adds to content_for('scripts')",
         "Step 4: Verify all scripts accumulated in layout"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 3: htmx() script tag helper",
      "passes" : true,
      "steps" : [
         "Step 1: Create template with <%= htmx() %>",
         "Step 2: Render template",
         "Step 3: Verify output contains <script src=...htmx.min.js>",
         "Step 4: Verify bundled htmx file exists in share/"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 3: hx_get() attribute helper generates correct attributes",
      "passes" : true,
      "steps" : [
         "Step 1: Call hx_get('/api/data', target => '#result', swap => 'innerHTML')",
         "Step 2: Verify output contains hx-get=\"/api/data\"",
         "Step 3: Verify output contains hx-target=\"#result\"",
         "Step 4: Verify output contains hx-swap=\"innerHTML\""
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 3: hx_post() with all options",
      "passes" : true,
      "steps" : [
         "Step 1: Call hx_post('/submit', target => 'this', trigger => 'click', confirm => 'Sure?')",
         "Step 2: Verify hx-post, hx-target, hx-trigger, hx-confirm all present",
         "Step 3: Test vals option serializes to JSON",
         "Step 4: Test headers option serializes to JSON"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 3: hx_delete() with confirm dialog",
      "passes" : true,
      "steps" : [
         "Step 1: Call hx_delete('/items/123', confirm => 'Delete item?')",
         "Step 2: Verify hx-delete attribute present",
         "Step 3: Verify hx-confirm attribute with message"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 3: hx_sse() for Server-Sent Events",
      "passes" : true,
      "steps" : [
         "Step 1: Call hx_sse('/events', connect => 1, swap => 'beforeend')",
         "Step 2: Verify hx-ext=\"sse\" attribute",
         "Step 3: Verify sse-connect attribute with URL",
         "Step 4: Verify sse-swap attribute"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 3: hx_ws() for WebSocket connections",
      "passes" : true,
      "steps" : [
         "Step 1: Call hx_ws('/ws', connect => 1)",
         "Step 2: Verify hx-ext=\"ws\" attribute",
         "Step 3: Verify ws-connect attribute with URL"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 4: is_htmx() request detection",
      "passes" : true,
      "steps" : [
         "Step 1: Create route that checks $c->req->is_htmx",
         "Step 2: Make request without HX-Request header",
         "Step 3: Verify is_htmx returns false",
         "Step 4: Make request with HX-Request: true header",
         "Step 5: Verify is_htmx returns true"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 4: Auto-fragment detection renders without layout for htmx requests",
      "passes" : true,
      "steps" : [
         "Step 1: Create route that calls $c->render('page')",
         "Step 2: Make browser request (no HX-Request header)",
         "Step 3: Verify full page with layout returned",
         "Step 4: Make htmx request (HX-Request: true)",
         "Step 5: Verify only content block returned (no layout)"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 4: render_or_redirect() helper",
      "passes" : true,
      "steps" : [
         "Step 1: Create route using render_or_redirect('/', 'partial', vars)",
         "Step 2: Make browser request",
         "Step 3: Verify 302 redirect to '/'",
         "Step 4: Make htmx request",
         "Step 5: Verify partial template rendered with 200"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 4: empty_or_redirect() helper for delete patterns",
      "passes" : true,
      "steps" : [
         "Step 1: Create route using empty_or_redirect('/')",
         "Step 2: Make browser request",
         "Step 3: Verify 302 redirect to '/'",
         "Step 4: Make htmx request",
         "Step 5: Verify empty 200 response (for element removal)"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 4: hx_trigger() response header",
      "passes" : true,
      "steps" : [
         "Step 1: Create route that calls $c->hx_trigger('todoAdded')",
         "Step 2: Make request",
         "Step 3: Verify HX-Trigger header in response",
         "Step 4: Test with data: $c->hx_trigger('showToast', message => 'Saved!')",
         "Step 5: Verify HX-Trigger header contains JSON"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 4: htmx_target() and htmx_current_url() request accessors",
      "passes" : true,
      "steps" : [
         "Step 1: Create route checking $c->req->htmx_target",
         "Step 2: Make request with HX-Target header",
         "Step 3: Verify htmx_target returns correct value",
         "Step 4: Test htmx_current_url with HX-Current-URL header"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 5: TO_HTML protocol - objects render themselves",
      "passes" : false,
      "steps" : [
         "Step 1: Create class with TO_HTML($self, $view) method",
         "Step 2: TO_HTML returns $view->include('_partial', item => $self)",
         "Step 3: Use object in template: <%= $object %>",
         "Step 4: Verify object renders via TO_HTML, not stringification"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 5: TO_HTML receives view context for include access",
      "passes" : false,
      "steps" : [
         "Step 1: Create Entity class with TO_HTML method",
         "Step 2: TO_HTML method calls $view->include()",
         "Step 3: Render template with entity object",
         "Step 4: Verify partial template rendered correctly"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 5: Objects without TO_HTML stringify normally",
      "passes" : false,
      "steps" : [
         "Step 1: Create object class without TO_HTML method",
         "Step 2: Ensure object has overloaded stringify",
         "Step 3: Use object in template: <%= $object %>",
         "Step 4: Verify output is escaped stringification"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 6: route() helper generates URLs from named routes",
      "passes" : true,
      "steps" : [
         "Step 1: Define named route: $app->get('/users/:id' => sub {})->name('user_show')",
         "Step 2: In template use <%= route('user_show', id => 123) %>",
         "Step 3: Verify output is /users/123"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 6: route() with query parameters",
      "passes" : true,
      "steps" : [
         "Step 1: Define named route: $app->get('/search' => sub {})->name('search')",
         "Step 2: Call route('search', query => { q => 'perl', page => 2 })",
         "Step 3: Verify output is /search?q=perl&page=2"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 6: route() integration with hx_* helpers",
      "passes" : true,
      "steps" : [
         "Step 1: Define named route todo_delete",
         "Step 2: Use <%= hx_delete(route('todo_delete', id => 1)) %>",
         "Step 3: Verify hx-delete attribute has correct URL"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 7: PAGI::Simple::Model base class instantiation",
      "passes" : false,
      "steps" : [
         "Step 1: Create model class inheriting from PAGI::Simple::Model",
         "Step 2: Call Model->for_context($c, $config)",
         "Step 3: Verify instance created with context and config",
         "Step 4: Verify $model->c returns context"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 7: $c->model('Name') returns model instance",
      "passes" : false,
      "steps" : [
         "Step 1: Configure app with model_namespace => 'MyApp::Model'",
         "Step 2: Create MyApp::Model::Todo class",
         "Step 3: In route handler call $c->model('Todo')",
         "Step 4: Verify instance of MyApp::Model::Todo returned"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 7: Model configuration passed via model_config",
      "passes" : false,
      "steps" : [
         "Step 1: Configure app with model_config => { DB => { dsn => '...' } }",
         "Step 2: Create MyApp::Model::DB that uses config",
         "Step 3: Call $c->model('DB')",
         "Step 4: Verify model received config in for_context"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 8: Model auto-discovery with Module::Pluggable",
      "passes" : false,
      "steps" : [
         "Step 1: Create model_namespace with multiple model classes",
         "Step 2: Configure app with that namespace",
         "Step 3: Verify all models discoverable via $c->model()",
         "Step 4: Verify nested models: MyApp::Model::Foo::Bar -> 'Foo::Bar'"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 8: Missing model gives clear error",
      "passes" : false,
      "steps" : [
         "Step 1: Configure app with model_namespace",
         "Step 2: Call $c->model('NonExistent')",
         "Step 3: Verify clear error message about missing model",
         "Step 4: Error should suggest available models"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 9: Factory pattern - new instance each call (default)",
      "passes" : false,
      "steps" : [
         "Step 1: Create model WITHOUT PerRequest role",
         "Step 2: Call $c->model('Todo') twice in same request",
         "Step 3: Verify two different instances returned",
         "Step 4: Verify $m1 != $m2 (different object refs)"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 9: Per-request caching with PerRequest role",
      "passes" : false,
      "steps" : [
         "Step 1: Create model with PerRequest role",
         "Step 2: Call $c->model('CurrentUser') twice in same request",
         "Step 3: Verify same instance returned both times",
         "Step 4: Verify $m1 == $m2 (same object ref)"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 9: Different requests get different cached instances",
      "passes" : false,
      "steps" : [
         "Step 1: Create model with PerRequest role",
         "Step 2: Make first request, get model instance",
         "Step 3: Make second request, get model instance",
         "Step 4: Verify instances are different between requests"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 10: Async for_context support",
      "passes" : false,
      "steps" : [
         "Step 1: Create model with async for_context method",
         "Step 2: for_context awaits another model or async operation",
         "Step 3: Call await $c->model('AsyncModel')",
         "Step 4: Verify async initialization completed correctly"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 10: Mixed sync/async models work together",
      "passes" : false,
      "steps" : [
         "Step 1: Create sync model (SyncModel)",
         "Step 2: Create async model (AsyncModel) that depends on SyncModel",
         "Step 3: Call await $c->model('AsyncModel')",
         "Step 4: Verify both models instantiated correctly"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 10: Per-request caching works with async models",
      "passes" : false,
      "steps" : [
         "Step 1: Create async model with PerRequest role",
         "Step 2: Call await $c->model('CachedAsync') twice",
         "Step 3: Verify same instance returned both times",
         "Step 4: Verify async init only ran once"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 11: Valiant role composes into view",
      "passes" : false,
      "steps" : [
         "Step 1: Create view with roles => ['PAGI::Simple::View::Role::Valiant']",
         "Step 2: Verify form_for helper becomes available",
         "Step 3: Verify no errors if Valiant not installed (graceful degradation)"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 12: form_for() creates bound form",
      "passes" : false,
      "steps" : [
         "Step 1: Create model object with title attribute",
         "Step 2: Call form_for($model, { action => '/submit' }, $block)",
         "Step 3: Verify <form> tag with correct action",
         "Step 4: Verify input values pre-populated from model"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 12: Input field helpers on FormBuilder",
      "passes" : false,
      "steps" : [
         "Step 1: Use $fb->input('title') in form_for block",
         "Step 2: Verify <input type=\"text\" name=\"model.title\" id=\"model_title\">",
         "Step 3: Test $fb->password(), $fb->hidden(), $fb->text_area()",
         "Step 4: Verify all generate correct HTML"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 12: form_for with htmx attributes",
      "passes" : false,
      "steps" : [
         "Step 1: Call form_for($model, { action => '...', %{hx_post(...)} }, $block)",
         "Step 2: Verify <form> has hx-post attribute",
         "Step 3: Verify hx-target and hx-swap if provided"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 13: errors_for() displays field errors",
      "passes" : false,
      "steps" : [
         "Step 1: Create model with validation errors on 'title'",
         "Step 2: Use $fb->errors_for('title') in form",
         "Step 3: Verify error messages displayed",
         "Step 4: Test custom rendering: $fb->errors_for('title', sub { ... })"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 13: model_errors() displays form-level errors",
      "passes" : false,
      "steps" : [
         "Step 1: Create model with base/model-level errors",
         "Step 2: Use $fb->model_errors(sub { ... }) in form",
         "Step 3: Verify model-level errors displayed"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 13: attribute_has_errors() for conditional CSS",
      "passes" : false,
      "steps" : [
         "Step 1: Create model with error on 'email' field",
         "Step 2: Check $fb->attribute_has_errors('email')",
         "Step 3: Verify returns true for email, false for other fields",
         "Step 4: Use in template: class=\"<%= $fb->attribute_has_errors('x') ? 'has-error' : '' %>\""
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 14: fields_for() with has_many collection",
      "passes" : false,
      "steps" : [
         "Step 1: Create model with comments relationship (array)",
         "Step 2: Use $fb->fields_for('comments', sub ($cfb, $comment) { ... })",
         "Step 3: Verify nested forms rendered for each comment",
         "Step 4: Verify names: model.comments[0].content, model.comments[1].content"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 14: fields_for() with _destroy checkbox",
      "passes" : false,
      "steps" : [
         "Step 1: Use $cfb->checkbox('_destroy') in nested form",
         "Step 2: Verify hidden field + checkbox rendered",
         "Step 3: Verify name: model.comments[0]._destroy"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 14: fields_for() new item block",
      "passes" : false,
      "steps" : [
         "Step 1: Use fields_for('comments', {}, $existing_block, $new_block)",
         "Step 2: Verify existing items rendered",
         "Step 3: Verify new item template rendered for adding"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 15: htmx form submission with validation",
      "passes" : false,
      "steps" : [
         "Step 1: Create form with hx-post for submission",
         "Step 2: Submit invalid data via htmx",
         "Step 3: Verify form re-rendered with errors (htmx swap)",
         "Step 4: Submit valid data",
         "Step 5: Verify success response (redirect or partial)"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 15: Inline field validation with htmx",
      "passes" : false,
      "steps" : [
         "Step 1: Add hx-post validation endpoint to input",
         "Step 2: Configure trigger => 'blur changed delay:300ms'",
         "Step 3: Trigger blur on field",
         "Step 4: Verify error span updated via htmx"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 16: Todo App - List todos on home page",
      "passes" : false,
      "steps" : [
         "Step 1: Start todo app server",
         "Step 2: GET /",
         "Step 3: Verify HTML response with todo list",
         "Step 4: Verify each todo rendered with checkbox and title"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 16: Todo App - Create new todo",
      "passes" : false,
      "steps" : [
         "Step 1: POST /todos with title parameter",
         "Step 2: Verify todo created",
         "Step 3: Verify redirect to home (browser request)",
         "Step 4: Test htmx: verify partial returned with new todo"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 16: Todo App - Create with validation error",
      "passes" : false,
      "steps" : [
         "Step 1: POST /todos with empty title",
         "Step 2: Verify form re-rendered with error",
         "Step 3: Verify error message about title required",
         "Step 4: Verify no todo created"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 16: Todo App - Toggle todo completion",
      "passes" : false,
      "steps" : [
         "Step 1: PATCH /todos/:id/toggle",
         "Step 2: Verify todo completion status toggled",
         "Step 3: Verify updated todo item partial returned",
         "Step 4: Verify HX-Trigger header sent"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 16: Todo App - Edit todo inline",
      "passes" : false,
      "steps" : [
         "Step 1: GET /todos/:id/edit",
         "Step 2: Verify edit form partial returned",
         "Step 3: PATCH /todos/:id with new title",
         "Step 4: Verify todo updated and item partial returned"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 16: Todo App - Delete todo",
      "passes" : false,
      "steps" : [
         "Step 1: DELETE /todos/:id",
         "Step 2: Verify todo deleted",
         "Step 3: Verify empty response for htmx (element removal)",
         "Step 4: Verify HX-Trigger header sent"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 16: Todo App - Filter by status",
      "passes" : false,
      "steps" : [
         "Step 1: GET /active",
         "Step 2: Verify only active (not completed) todos shown",
         "Step 3: GET /completed",
         "Step 4: Verify only completed todos shown"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 16: Todo App - Clear completed",
      "passes" : false,
      "steps" : [
         "Step 1: Create mix of completed and active todos",
         "Step 2: POST /todos/clear-completed",
         "Step 3: Verify only active todos remain",
         "Step 4: Verify list re-rendered"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 16: Todo App - Toggle all",
      "passes" : false,
      "steps" : [
         "Step 1: Create mix of completed and active todos",
         "Step 2: POST /todos/toggle-all",
         "Step 3: Verify all todos now completed",
         "Step 4: Toggle again, verify all uncompleted"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 16: Todo App - SSE live updates",
      "passes" : false,
      "steps" : [
         "Step 1: Connect to /todos/live SSE endpoint",
         "Step 2: Verify 'connected' event received",
         "Step 3: Create todo in another request",
         "Step 4: Verify 'refresh' event received on SSE"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 16: Todo App - Progressive enhancement",
      "passes" : false,
      "steps" : [
         "Step 1: GET / without JavaScript",
         "Step 2: Verify full page rendered with forms",
         "Step 3: Submit form via standard POST (no htmx)",
         "Step 4: Verify redirect and page reload works"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 17: User App - User list with all input types",
      "passes" : false,
      "steps" : [
         "Step 1: GET /users",
         "Step 2: Verify user list rendered",
         "Step 3: GET /users/new",
         "Step 4: Verify form with text, password, select, checkbox, radio"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 17: User App - Per-request cached CurrentUser model",
      "passes" : false,
      "steps" : [
         "Step 1: Create route that accesses $c->model('CurrentUser') twice",
         "Step 2: Make request",
         "Step 3: Verify same instance used both times",
         "Step 4: Verify CurrentUser uses PerRequest role"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 18: Nested Forms - Task with Comments",
      "passes" : false,
      "steps" : [
         "Step 1: GET /tasks/new",
         "Step 2: Verify task form with nested comments fields_for",
         "Step 3: POST task with multiple comments",
         "Step 4: Verify task and comments created"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 18: Nested Forms - Add item to collection via htmx",
      "passes" : false,
      "steps" : [
         "Step 1: Click 'Add Comment' button",
         "Step 2: Verify htmx adds new comment form fields",
         "Step 3: Fill in new comment",
         "Step 4: Submit form",
         "Step 5: Verify new comment saved"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 18: Nested Forms - Remove item with _destroy",
      "passes" : false,
      "steps" : [
         "Step 1: Edit task with existing comments",
         "Step 2: Check _destroy checkbox on comment",
         "Step 3: Submit form",
         "Step 4: Verify comment removed"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 18: Nested Forms - Validation errors on nested items",
      "passes" : false,
      "steps" : [
         "Step 1: Submit task with invalid comment (empty content)",
         "Step 2: Verify error displayed on nested comment field",
         "Step 3: Fix error and resubmit",
         "Step 4: Verify form accepted"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 19: Development mode - no template caching",
      "passes" : false,
      "steps" : [
         "Step 1: Create view with development => 1",
         "Step 2: Render template",
         "Step 3: Modify template file",
         "Step 4: Render again",
         "Step 5: Verify changes reflected without restart"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 19: Development mode - detailed error messages",
      "passes" : false,
      "steps" : [
         "Step 1: Create view with development => 1",
         "Step 2: Create template with syntax error",
         "Step 3: Attempt to render",
         "Step 4: Verify error includes template source",
         "Step 5: Verify error includes line number"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 19: Missing template gives clear error",
      "passes" : false,
      "steps" : [
         "Step 1: Try to render non-existent template",
         "Step 2: Verify error message mentions template name",
         "Step 3: Verify error suggests checking template_dir"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 20: POD documentation for PAGI::Simple::View",
      "passes" : false,
      "steps" : [
         "Step 1: Run perldoc PAGI::Simple::View",
         "Step 2: Verify NAME, SYNOPSIS, DESCRIPTION present",
         "Step 3: Verify all public methods documented",
         "Step 4: Verify examples are runnable"
      ]
   },
   {
      "category" : "functional",
      "description" : "Step 20: POD documentation for PAGI::Simple::Model",
      "passes" : false,
      "steps" : [
         "Step 1: Run perldoc PAGI::Simple::Model",
         "Step 2: Verify complete documentation",
         "Step 3: Verify for_context pattern documented",
         "Step 4: Verify PerRequest role documented"
      ]
   },
   {
      "category" : "style",
      "description" : "Todo App - TodoMVC-inspired styling",
      "passes" : false,
      "steps" : [
         "Step 1: Load todo app in browser",
         "Step 2: Verify clean, minimal design",
         "Step 3: Verify checkbox styling",
         "Step 4: Verify completed items have strikethrough",
         "Step 5: Verify delete button appears on hover"
      ]
   },
   {
      "category" : "style",
      "description" : "Todo App - htmx loading indicators",
      "passes" : false,
      "steps" : [
         "Step 1: Trigger htmx request",
         "Step 2: Verify .htmx-request class applied during loading",
         "Step 3: Verify opacity or visual feedback shows loading state",
         "Step 4: Verify indicator removed when complete"
      ]
   },
   {
      "category" : "style",
      "description" : "Form error styling",
      "passes" : false,
      "steps" : [
         "Step 1: Submit form with validation errors",
         "Step 2: Verify .has-error class on field containers",
         "Step 3: Verify .error class on error messages",
         "Step 4: Verify error text is red/visible color"
      ]
   },
   {
      "category" : "style",
      "description" : "Responsive design",
      "passes" : false,
      "steps" : [
         "Step 1: Load todo app at desktop width",
         "Step 2: Verify proper layout",
         "Step 3: Resize to mobile width",
         "Step 4: Verify layout adapts appropriately"
      ]
   },
   {
      "category" : "functional",
      "description" : "Test file: t/view/00-view-basic.t passes",
      "passes" : false,
      "steps" : [
         "Step 1: Run prove -l t/view/00-view-basic.t",
         "Step 2: Verify all tests pass",
         "Step 3: Verify covers template compilation",
         "Step 4: Verify covers variable interpolation"
      ]
   },
   {
      "category" : "functional",
      "description" : "Test file: t/view/01-view-helpers.t passes",
      "passes" : false,
      "steps" : [
         "Step 1: Run prove -l t/view/01-view-helpers.t",
         "Step 2: Verify all tests pass",
         "Step 3: Verify covers escape/raw/safe",
         "Step 4: Verify covers include helper"
      ]
   },
   {
      "category" : "functional",
      "description" : "Test file: t/view/02-view-htmx.t passes",
      "passes" : false,
      "steps" : [
         "Step 1: Run prove -l t/view/02-view-htmx.t",
         "Step 2: Verify all tests pass",
         "Step 3: Verify covers all hx_* helpers"
      ]
   },
   {
      "category" : "functional",
      "description" : "Test file: t/view/03-view-layouts.t passes",
      "passes" : false,
      "steps" : [
         "Step 1: Run prove -l t/view/03-view-layouts.t",
         "Step 2: Verify all tests pass",
         "Step 3: Verify covers extends/block/content"
      ]
   },
   {
      "category" : "functional",
      "description" : "Test file: t/view/05-view-to-html.t passes",
      "passes" : false,
      "steps" : [
         "Step 1: Run prove -l t/view/05-view-to-html.t",
         "Step 2: Verify all tests pass",
         "Step 3: Verify covers TO_HTML protocol"
      ]
   },
   {
      "category" : "functional",
      "description" : "Test file: t/view/06-view-auto-fragment.t passes",
      "passes" : false,
      "steps" : [
         "Step 1: Run prove -l t/view/06-view-auto-fragment.t",
         "Step 2: Verify all tests pass",
         "Step 3: Verify covers htmx fragment detection"
      ]
   },
   {
      "category" : "functional",
      "description" : "Test file: t/model/00-model-basic.t passes",
      "passes" : false,
      "steps" : [
         "Step 1: Run prove -l t/model/00-model-basic.t",
         "Step 2: Verify all tests pass",
         "Step 3: Verify covers Model base class"
      ]
   },
   {
      "category" : "functional",
      "description" : "Test file: t/model/01-model-discovery.t passes",
      "passes" : false,
      "steps" : [
         "Step 1: Run prove -l t/model/01-model-discovery.t",
         "Step 2: Verify all tests pass",
         "Step 3: Verify covers Module::Pluggable discovery"
      ]
   },
   {
      "category" : "functional",
      "description" : "Test file: t/model/03-model-per-request.t passes",
      "passes" : false,
      "steps" : [
         "Step 1: Run prove -l t/model/03-model-per-request.t",
         "Step 2: Verify all tests pass",
         "Step 3: Verify covers PerRequest role"
      ]
   },
   {
      "category" : "functional",
      "description" : "Test file: t/model/04-model-async.t passes",
      "passes" : false,
      "steps" : [
         "Step 1: Run prove -l t/model/04-model-async.t",
         "Step 2: Verify all tests pass",
         "Step 3: Verify covers async for_context"
      ]
   },
   {
      "category" : "functional",
      "description" : "Test file: t/valiant/00-valiant-form-for.t passes",
      "passes" : false,
      "steps" : [
         "Step 1: Run prove -l t/valiant/00-valiant-form-for.t",
         "Step 2: Verify all tests pass",
         "Step 3: Verify covers form_for helper"
      ]
   },
   {
      "category" : "functional",
      "description" : "Test file: t/valiant/03-valiant-errors.t passes",
      "passes" : false,
      "steps" : [
         "Step 1: Run prove -l t/valiant/03-valiant-errors.t",
         "Step 2: Verify all tests pass",
         "Step 3: Verify covers errors_for helper"
      ]
   },
   {
      "category" : "functional",
      "description" : "Test file: t/integration/00-todo-app.t passes",
      "passes" : false,
      "steps" : [
         "Step 1: Run prove -l t/integration/00-todo-app.t",
         "Step 2: Verify all tests pass",
         "Step 3: Verify covers full CRUD operations"
      ]
   },
   {
      "category" : "functional",
      "description" : "All existing tests continue to pass",
      "passes" : false,
      "steps" : [
         "Step 1: Run prove -l t/",
         "Step 2: Verify all pre-existing tests pass",
         "Step 3: Verify no regressions in PAGI::Simple core",
         "Step 4: Verify no regressions in PAGI::Server"
      ]
   },
   {
      "category" : "functional",
      "description" : "htmx JavaScript bundled in share/htmx/",
      "passes" : true,
      "steps" : [
         "Step 1: Verify share/htmx/htmx.min.js exists",
         "Step 2: Verify share/htmx/ext/ws.js exists",
         "Step 3: Verify share/htmx/ext/sse.js exists",
         "Step 4: Verify htmx version is 2.0.x"
      ]
   },
   {
      "category" : "functional",
      "description" : "Template extension .html.ep works correctly",
      "passes" : false,
      "steps" : [
         "Step 1: Create templates/test.html.ep",
         "Step 2: Render 'test' template",
         "Step 3: Verify .html.ep extension automatically added",
         "Step 4: Verify partials like _partial.html.ep found"
      ]
   },
   {
      "category" : "functional",
      "description" : "Example app: examples/view-todo/ complete and runnable",
      "passes" : false,
      "steps" : [
         "Step 1: cd examples/view-todo",
         "Step 2: Run pagi-server --app app.pl",
         "Step 3: Visit http://localhost:5000/",
         "Step 4: Verify todo app loads and functions"
      ]
   },
   {
      "category" : "functional",
      "description" : "Example app: examples/view-users/ complete and runnable",
      "passes" : false,
      "steps" : [
         "Step 1: cd examples/view-users",
         "Step 2: Run pagi-server --app app.pl",
         "Step 3: Visit http://localhost:5000/",
         "Step 4: Verify user management app functions"
      ]
   },
   {
      "category" : "functional",
      "description" : "Example app: examples/view-nested/ complete and runnable",
      "passes" : false,
      "steps" : [
         "Step 1: cd examples/view-nested",
         "Step 2: Run pagi-server --app app.pl",
         "Step 3: Visit http://localhost:5000/",
         "Step 4: Verify nested forms app functions"
      ]
   }
]
